#!/bin/bash

shopt -s nullglob
for f in *.mp4; do
    [ -f "$f" ] || continue
    base="${f%.mp4}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.mp4"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done

shopt -s nullglob
for f in *.mp3; do
    [ -f "$f" ] || continue
    base="${f%.mp3}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.mp3"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done

shopt -s nullglob
for f in *.vtt; do
    [ -f "$f" ] || continue
    base="${f%.vtt}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.vtt"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done

shopt -s nullglob
for f in *.srt; do
    [ -f "$f" ] || continue
    base="${f%.srt}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.srt"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done

shopt -s nullglob
for f in *.zip; do
    [ -f "$f" ] || continue
    base="${f%.zip}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.zip"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done

shopt -s nullglob
for f in *.pdf; do
    [ -f "$f" ] || continue
    base="${f%.pdf}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.pdf"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done

shopt -s nullglob
for f in *.jpg; do
    [ -f "$f" ] || continue
    base="${f%.jpg}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.jpg"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done

shopt -s nullglob
for f in *.png; do
    [ -f "$f" ] || continue
    base="${f%.png}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.png"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done
