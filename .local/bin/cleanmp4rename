#!/bin/bash

shopt -s nullglob
for f in *.mp4; do
    [ -f "$f" ] || continue
    base="${f%.mp4}"
    # Ponctuation => tiret, groupes d'espaces => tiret, compresse tirets
    newname=$(echo "$base" | tr '[:punct:]' '-' | tr -s '[:space:]' '-' | tr -s '-')
    # Enlève tirets début/fin
    newname=$(echo "$newname" | sed 's/^-*//;s/-*$//')
    finalname="${newname}.mp4"
    if [[ "$f" != "$finalname" && ! -e "$finalname" ]]; then
        mv -- "$f" "$finalname"
    fi
done
