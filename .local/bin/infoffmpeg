#!/usr/bin/env bash
for f in *.mp4; do
  codec=$(ffprobe -v error -select_streams v:0 -show_entries stream=codec_name -of default=nokey=1:noprint_wrappers=1 "$f")
  width=$(ffprobe -v error -select_streams v:0 -show_entries stream=width -of default=nokey=1:noprint_wrappers=1 "$f")
  height=$(ffprobe -v error -select_streams v:0 -show_entries stream=height -of default=nokey=1:noprint_wrappers=1 "$f")
  fps=$(ffprobe -v error -select_streams v:0 -show_entries stream=r_frame_rate -of default=nokey=1:noprint_wrappers=1 "$f")

  # Calcul fps float
  fps_float=$(echo "scale=2; $(echo $fps | bc -l)" | bc)

  echo -e "$f\t$codec\t${width}x${height}\t$fps_float fps"
done | sort -k3,3 -k2,2 -k4,4
